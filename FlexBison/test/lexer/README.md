# Unit Test for Lexer
## Ant√¥nio Amaral Egydio Martins

### Overview
This document outlines the steps required to run unit tests for the lexer, generated from Flex and Bison files. Follow the steps below to configure, compile, and run the tests.

---

### 1. How to Run the Unit Tests

#### 1.1 Required Changes Before Running

Ensure the following changes are applied to your Flex and Bison files before proceeding with the tests:

1. **Place the Flex and Bison Files**:
   - Copy `lexer.l` and `parser.y` into the `test/lexer` directory.
   
##### 1.1.1 Modifications to the Flex File (`lexer.l`)

2. Update the include path for Bison's generated header file in `lexer.l`:
   - Change the line:
     ```c
     #include "parser.tab.h"
     ```
     - To the correct relative path where `parser.tab.h` is located after Bison generates it.

##### 1.1.2 Modifications to the Bison File (`parser.y`)

3. Add the following code to the declaration section of `parser.y` to properly declare `yylex()` and `yyerror()`:
   ```c
   // Declare yylex and yyerror
   int yylex(void);
   int yyerror(const char *msg);
   ```

4. **Remove the `main()` Function from `parser.y`**:
   - If a `main()` function exists in your Bison file, remove it to avoid conflicts with the `main()` in `main.c`.

---

#### 1.2 Compiling and Running the Tests

With the `lexer.l` and `parser.y` files correctly placed and updated, follow the steps below to compile and run the lexer tests:

##### 1.2.1 Compiling the Lexer

To compile the lexer, run the following command:
```bash
./compile.sh
```
This will generate the `lexer_test` executable.

##### 1.2.2 Running the Unit Tests

To run the tests, execute:
```bash
./run_tests.sh
```

---

### 2. Operating System-Specific Instructions

The compilation command varies depending on the operating system. Modify the `run_tests.sh` script accordingly:

#### 2.1 On Windows (using GCC)

Replace the compilation command in `run_tests.sh` with the following:
```bash
gcc -o lexer_test lex.yy.c main.c -lfl
```

#### 2.2 On macOS (using Clang)

For macOS, use the following command in `run_tests.sh`:
```bash
clang -o lexer_test parser.tab.c lex.yy.c main.c -ll
```

Ensure that the correct path to `parser.tab.c` and `lex.yy.c` is set in the compilation command based on where the files are generated.

---

### 3. Additional Notes

- Make sure `flex`, `bison`, and your C compiler (either GCC or Clang) are installed and correctly set up on your system.
- The `run_tests.sh` script will automate the testing process by comparing expected output with the actual output generated by `lexer_test`. Make sure your test input files and expected output files are properly formatted and placed in the correct directory.